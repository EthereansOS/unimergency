"use strict";function _typeof(e){return e&&typeof Symbol!="undefined"&&e.constructor===Symbol?"symbol":typeof e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,s){try{var o=t[i](s),u=o.value}catch(a){n(a);return}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/bigLoader.jsx','spa/ghostLoader.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/loader.jsx','spa/proposal/controller.jsx','spa/proposal/style.min.css','spa/proposal/view.jsx','spa/stakingElement/controller.jsx','spa/stakingElement/style.min.css','spa/stakingElement/view.jsx','spa/unimergency/controller.jsx','spa/unimergency/style.min.css','spa/unimergency/view.jsx']);var BigLoader=React.createClass({displayName:"BigLoader",getDefaultSubscriptions:function(){var t=this;return{"loader/show":function(){return t.setState({propagate:!1,transaction:0,chunks:0},function(){return t.domRoot.css("display","block")})},"loader/propagate":this.propagate,"loader/hide":this.hideLoader,"loader/transaction":this.transaction,"loader/chunks":function(n){return t.setState({propagate:!1,transaction:0,chunks:n},function(){return t.domRoot.css("display","block")})}}},getInitialState:function(){return{counter:60}},propagate:function(t,n){var r=this;t&&t.forEach(function(e){return window.AJAXRequest(e.split("ipfs://").join("//gateway.ipfs.io/"))});var i=function(){if(r.state.counter===0)return r.interval&&clearInterval(r.interval),n&&n();r.setState({counter:r.state.counter-1,chunks:0})};r.interval&&clearInterval(r.interval),r.setState({counter:60,propagate:!0,transaction:0,chunks:0},function(){r.domRoot.css("display","block"),r.interval=setInterval(i,1e3)})},hideLoader:function(){this.interval&&clearInterval(this.interval),this.domRoot.css("display","none"),this.setState({propagate:!1,transaction:0,chunks:0})},transaction:function(t,n){this.interval&&clearInterval(this.interval),this.setState({transaction:t,transactions:n,propagate:!1,chunks:0})},render:function(){return React.createElement("section",{className:"UPLOADBANNER"},this.state.chunks&&React.createElement("h1",null,"Generating ",this.state.chunks," chunks..."),!this.state.chunks&&!this.state.propagate&&!this.state.transaction&&React.createElement("h1",null,this.props.message!==undefined&&this.props.message!==null?this.props.message:""),!this.state.chunks&&this.state.propagate&&React.createElement("h1",null,this.state.counter),!this.state.chunks&&this.state.propagate&&React.createElement("h2",null,"Waiting for Propagation"),!this.state.chunks&&this.state.transaction&&React.createElement("h2",null,"Transaction ",this.state.transaction," ",this.state.transactions>1&&React.createElement("span",null,"of ",this.state.transactions)),React.createElement("img",{src:"assets/img/vampire.gif"}))}});var GhostLoader=React.createClass({displayName:"GhostLoader",render:function(){return React.createElement("img",{width:"25",src:"assets/img/vampire.gif"})}});var IndexController=function(t){var n=this;n.view=t};var Index=React.createClass({displayName:"Index",requiredModules:["spa/proposal"],requiredScripts:["spa/bigLoader.jsx"],getInitialState:function(){return{element:"Proposal"}},onClick:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.changeView(t.currentTarget.innerHTML)},changeView:function(t){var n=this;this.domRoot.children().find("a").removeClass("selected").each(function(e,n){if(n.innerHTML.toLowerCase()===t.toLowerCase())return $(n).addClass("selected")}),ReactModuleLoader.load({modules:["spa/"+t.toLowerCase()],callback:function(){n.setState({element:t})}})},componentDidMount:function(){window.addressBarParams.addr&&window.addressBarParams.id&&this.changeView("Vote")},render:function(){return React.createElement("section",{className:"OnePage"},React.createElement("header",{className:"Head"},React.createElement("section",{className:"HBrand"},React.createElement("h6",null,React.createElement("img",{src:"assets/img/vampire1.gif"}))),React.createElement("section",{className:"HActions"},React.createElement("a",{href:"https://discord.gg/FPcZpxB",target:"_Blank"},"#AMA"),React.createElement("a",{href:"https://github.com/b-u-i-d-l/unimergency",target:"_Blank"},"#github"),React.createElement("a",{href:window.getNetworkElement("etherscanURL")+"address/"+window.getNetworkElement("liquidityMiningRedeemAddress"),target:"_blank"},"#etherscan"))),React.createElement("section",{className:"PagerMenu"},React.createElement("ul",{className:"Menu"},React.createElement("a",{href:"javascript:;",className:"MInfoSelector selected",onClick:this.onClick},"Proposal"),React.createElement("a",{href:"javascript:;",className:"MInfoSelector",onClick:this.onClick},"Unimergency"))),React.createElement("section",{className:"ActionSection"},React.createElement(window[this.state.element])))}});var Loader=React.createClass({displayName:"Loader",render:function(){return React.createElement("img",{src:"assets/img/vampire.gif"})}});var ProposalController=function(t){var n=this;n.view=t,n.loadData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(window.ethereum){E.next=2;break}return E.abrupt("return");case 2:return e=window.newContract(window.context.QuickscopeVoteABI,window.getNetworkElement("quickscopeVoteAddress")),E.next=5,window.blockchainCall(e.methods.votes);case 5:t=E.sent,i={accepts:[],refuses:[]},s=!1,o=!1;if(!window.walletAddress){E.next=19;break}return E.next=12,window.blockchainCall(e.methods.votes,window.walletAddress);case 12:return i=E.sent,i.accepts=i[0],i.refuses=i[1],E.next=17,window.blockchainCall(e.methods.redeemed,window.walletAddress);case 17:s=E.sent,o=i.accepts.reduce(function(e,t){return parseInt(e)+parseInt(t)})+i.refuses.reduce(function(e,t){return parseInt(e)+parseInt(t)})>0;case 19:return E.next=21,window.web3.eth.getBlockNumber();case 21:return u=E.sent,E.next=24,window.blockchainCall(e.methods.startBlock);case 24:return a=E.sent,E.next=27,window.blockchainCall(e.methods.endBlock);case 27:return f=E.sent,l=u>=parseInt(a),c=u>=parseInt(f),h=l&&!c,E.next=33,window.blockchainCall(e.methods.votingTokens);case 33:p=E.sent,d=[],v=p,m=Array.isArray(v),g=0,v=m?v:v[Symbol.iterator]();case 36:if(!m){E.next=42;break}if(!(g>=v.length)){E.next=39;break}return E.abrupt("break",54);case 39:y=v[g++],E.next=46;break;case 42:g=v.next();if(!g.done){E.next=45;break}return E.abrupt("break",54);case 45:y=g.value;case 46:return b=y,E.t0=d,E.next=50,window.loadTokenInfos(b);case 50:E.t1=E.sent,E.t0.push.call(E.t0,E.t1);case 52:E.next=36;break;case 54:w=d[0],n.view.setState({voteContract:e,votes:t,myVotes:i,redeemed:s,currentBlock:u,startBlock:a,endBlock:f,started:l,terminated:c,running:h,votingTokens:d,voted:o,selectedToken:w});case 56:case"end":return E.stop()}},r,this)}));return t}(),n.performRedeem=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.blockchainCall(n.view.state.voteContract.methods.redeemVotingTokens,window.walletAddress);case 2:case"end":return t.stop()}},r,this)}));return t}()};var Proposal=React.createClass({displayName:"Proposal",requiredScripts:["spa/bigLoader.jsx","spa/ghostLoader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"ethereum/ping":function(){return t.controller.loadData()}}},componentDidMount:function(){this.controller.loadData()},perform:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.currentTarget;if(this.state&&this.state.performing||n.className.indexOf("Disabled")!==-1)return;var r=n.dataset.action,i=[];for(var s=1;s<arguments.length;s++)i.push(arguments[s]);var o=this,u=function(t){var n=t&&(t.message||t);o.setState({performing:null},function(){n&&n.indexOf("denied")===-1&&setTimeout(function(){alert(n)}),!n&&o.controller.loadTokenData()})};o.setState({performing:r},function(){o.controller["perform"+r.firstLetterToUpperCase()].apply(this,i).catch(u).finally(u)})},render:function(){var t=this,n,r=this;return React.createElement("section",null,React.createElement("section",{className:"LEADERSFINALAll"},this.state&&React.createElement("section",null,!window.walletAddress&&React.createElement("section",{className:"Actions YOURVOTE"},React.createElement("section",{className:"Buttons"},React.createElement("a",{className:"APPROVEBTN",href:"javascript:;",onClick:function(){return window.ethereum.enable().then(t.controller.loadData)}},"Connect"))),window.walletAddress&&this.state.voted&&React.createElement("section",{className:"YOURVOTE"},React.createElement("h5",null,"Withdraw for Survey participants"),this.state.votingTokens.map(function(e,t){return React.createElement("p",{key:e.address},window.fromDecimals(parseInt(r.state.myVotes.accepts[t])+parseInt(r.state.myVotes.refuses[t]),e.decimals)," ",e.symbol)}),React.createElement("p",null,"You'll be able to redeem your tokens here at ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"block/"+this.state.endBlock},"the end of the Proposal")),this.state.terminated&&!this.state.redeemed&&window.walletAddress&&React.createElement("section",{className:"Buttons"},this.state.performing!=="redeem"&&React.createElement("a",{className:"APPROVEBTN"+(this.state.performing?" Disabled":""),href:"javascript:;","data-action":"redeem",onClick:this.perform},"Redeem"),this.state.performing==="redeem"&&React.createElement(GhostLoader,null))),React.createElement("section",{className:"Status"},!this.state.started&&React.createElement("h2",null,"The survey will start at block ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"block/"+this.state.startBlock},"#",this.state.startBlock)),this.state.terminated&&React.createElement("h2",null,"The survey has been terminated at block ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"block/"+this.state.endBlock},"#",this.state.endBlock)),this.state.running&&React.createElement("h2",null,"End Block: ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"block/"+this.state.endBlock},"#",this.state.endBlock)),this.state.started&&React.createElement("section",{className:"YOURVOTE"},React.createElement("h3",null,"Status:"),React.createElement("h4",null,window.fromDecimals(this.state.votes[0],18).split(".")[0]," Accept"),React.createElement("h4",null,window.fromDecimals(this.state.votes[1],18).split(".")[0]," Refuse")))),(!this.state||!this.state.votes)&&React.createElement("img",{src:"assets/img/vampire.gif"})),React.createElement("section",{className:"ExpTop"},React.createElement("h1",null,"To Our Dear DFOhub Community"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"By now, you are no doubt aware of the issue arising from Uniswap’s frontend routing. ",React.createElement("br",null),React.createElement("a",(n={target:"_blank",href:"https://medium.com/dfohub/a-black-hole-in-uniswap-v2s-front-end-router-is-draining-the-value-of-tokens-26f5a459b5d7"},n.target="_Blank",n),"A Black Hole in Uniswap V2’s Front-End Router Is Draining the Value of Tokens"),".")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"We are now ready to take action and leave it behind us once and for all.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,React.createElement("b",null,"You are going to have the chance to vote on our path forward. ",React.createElement("br",null),React.createElement("br",null),"But first..."))),React.createElement("h2",null,"Thank You For Your Ongoing Support 💜"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Throughout this difficult and stressful period, you have demonstrated patience and understanding, and we are grateful. A special thanks to CD, King Shroom, J_Der, Isolating, Suslik, Khonsu, Bbella, JoeGrech and others for helping us explain the problem to Uniswap’s team and bring it to the attention of the wider public.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"We want to clarify that this is not a technical problem with smart contracts or anything of that nature. Rather, it is an adverse effect of Uniswap’s centralized design.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"They could resolve it by altering their custom routing system and asking the chain to swap via all possible pairs, instead of only via pairs tied to the six tokens they have arbitrarily chosen. (the proof of how could be easy is this friendly Front-end fork for made in 10 min by Ale yesterday: ",React.createElement("a",{target:"blank",href:"https://alet89.github.io/uniswap-interface/#/swap"},"Uniswap Fork"),") ",React.createElement("br",null)," This would not only put an end to vampire bot arbitrage, it would also democratize liquidity pools and thus provider fees; if swaps were not forced to route through a small sample of pairs, there would be no incentive to provide liquidity to those pools over others.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"So, for now, we are left to our own devices. And we have come up with our own solution.")),React.createElement("h2",null,"Our Plan"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Since we published our article, the bots have multiplied and become more sophisticated.  Fortunately, we have figured out a strategy to escape.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"We need to remove as much liquidity as possible from pairs untied to ETH, and migrate that liquidity to the UniFi-ETH, BUIDL-ETH and ARTE-ETH pairs.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"When we developed the $BUIDL, $UniFi and $ARTE smart contracts, we included an emergency function in line with our Responsible approach to DeFi. This function is a Call called ",React.createElement("b",{className:"VVVV"},"“Flash to Wallet”")," that is perfect for emergency situations like this.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"By calling this functionality, we can migrate the funds from current staking contracts—both the rewards and the locked tokens—and send them to others, where stakers can redeem them based on a snapshot that will be taken if the strategy is implemented, following a vote.")),React.createElement("section",{className:"ExpPar"},React.createElement("h3",null,React.createElement("b",null,"And we can do all of this without relying on any centralized third party."))),React.createElement("h2",null,"What Does This Mean?"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"By allowing users to unstake their positions from Uniswap’s liquidity pools, we can drain all liquidity from the pairs the bots are using to exploit Uniswap’s routing.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Immediately after a ",React.createElement("b",{className:"VVVV"},"YES")," vote, the liquidity will be removed, executing all of the actions necessary to implement our strategy. Stakers will be able to redeem their positions + redeemable rewards (accrued up until the emergency action execution block) + bonus reward (see below) all in a single transaction, via the UI at ",React.createElement("a",{target:"blank",href:"https://unimergency.dfohub.com"},"https://unimergency.dfohub.com"),".")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"The faster we work to do this as a community, the better. To accelerate the transition, we are going to reward each staker who claims their current position within 48 hours with a ",React.createElement("b",{className:"VVVV"},"bonus 50 BUIDL + 0.4 ETH")," (per each wallet with a contract), taken from the DFOhub wallet.")),React.createElement("a",{target:"blank",href:"https://github.com/b-u-i-d-l/unimergency"},"Github"),React.createElement("h2",null,"And Then What?"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"To best elude the bots, all newly available staking positions will be tied to ETH pairs, like in the good old days of Uniswap V1. But we have also coded these ",React.createElement("b",{className:"VVVV"},"new Liquidity Mining Contracts (v1.5)")," with cool new features:")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"Multi-Reward")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"With the current contracts, DFOs could only reward staking with their own voting tokens. But with the v1.5 contracts, they can reward with any token they hold in their wallet! Don’t worry—if they don’t hold the amount of tokens required to pay out rewards, staking to earn them will not be allowed. Rewards will need to be locked in external contracts, so no one, even by voting, can touch them for the wrong reason.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,React.createElement("b",null,"Example:")," The DFOhub DFO (governed by BUIDL) will be able to reward UniFi-ETH stakers with BUIDL, or BUIDL-ETH stakers with UniFi.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"Unlock Function")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"With v1.5 contracts, positions can be unlocked and withdrawn by stakers anytime, as long as they pay back any claimed rewards, all of which will be forfeit in this scenario.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,React.createElement("b",null,"Example:")," Say you stake BUIDL in a three month position, and the total reward is 150 BUIDL. You can withdraw your position whenever you like before the three months is over, but if you’ve already claimed 50 in rewards, you’ll have to pay that back first to do so, and will not be able to earn the rest of the future rewards you otherwise would have.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"Liquidity Mining Block End")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"DFOs will be able to set a cutoff in blocks for new positions, so that new ones cannot be opened. Open positions will not be affected.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"Staker Flash-to-Wallet")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"This is basically the same as the emergency function we are using to unlock and migrate the liquidity, but it will be available to every single staker. By calling Flash to Wallet, stakers will be able to withdraw their earned rewards to their own personal wallet, but send the LP tokens and future rewards to the DFO wallet for emergency purposes. This way, the DFO can’t force the Flash to Wallet via voting (which could be abused by big holders), and every staker can make the choice for themselves.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"Disclamer:")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Current stakers will be able to redeem the rewards their position has earned (along with their position and extra bonus reward) up to the block when the emergency move was executed (not the total reward they would have accrued by the original end of the staking period). ",React.createElement("br",null),"This removes any incentive for stakers to maintain their current positions. If they want to continue earning rewards, they can open positions in the new staking contracts.")),React.createElement("h2",null,"New Liquidity Mining Rewards"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"The new BUIDL, UniFi and ARTE positions will only be for pairs tied with ETH. This is to incentivize liquidity and help ensure we won’t continue to be drained by vampire bots. By disallowing positions tied to pairs that are excluded by Uniswap’s routes, stakers will no longer be deprived of the trading fees they signed up for and which they deserve.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Due to the upcoming DFOhub v0.5 release, and the possible switch from the current voting tokens to new ones of the EthItem standard, these new liquidity mining tiers will all only be three months long. To increase the incentives to stake, they will also give more rewards relative to the old positions (and the new ones that will come after DFOhub v0.5).")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"~~~spoiler start~~~")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"We will share the DFOhub v0.5 release plan sometime over the next few weeks. With v0.5, DFOs will be rebranded as EPOs (ETH Programmable Organizations) ",React.createElement("br",null),"v.05 will also come with Liquidity Mining 2.0, which will also be known as Programmable Liquidity Mining and include even more fancy new features.",React.createElement("br",null),"These changes will reflect new and improved technology.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"~~~spoiler end~~~")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Due to the fixed inflation swaps with UniFi and ARTE, BUIDL’s circ supply is currently 88,306 less than planned by the fair inflation strategy paper. Of that, 4,450 BUIDL will be sent to the contract that will reward current stakers, and 83,856 will be sent to the DFOhub wallet to increase the available rewards for staking buidl in the new staking contracts.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"NOTE: New ARTE staking positions will not be available until the release of EthItem, which due to the delay caused by this issue is now expected mid-October.")),React.createElement("h2",null,"The New Liquidity Mining Contracts"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"All new contracts are for a ",React.createElement("b",{className:"VVVV"},"three month period"),", and new positions can be opened for up to thirty days after they first become available.")),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"BUIDL-ETH Tier"),React.createElement("ul",null,React.createElement("p",null,"If reward is chosen in ",React.createElement("b",null,"BUIDL")),React.createElement("li",null,React.createElement("p",null,"- 30% reward")),React.createElement("li",null,React.createElement("p",null,"- 36,000 BUIDL total reward")),React.createElement("li",null,React.createElement("p",null,"- 120,000 BUIDL max staked simultaneously"))),React.createElement("ul",null,React.createElement("p",null,"If reward is chosen in ",React.createElement("b",null,"UniFi")),React.createElement("li",null,React.createElement("p",null,"- 50% reward")),React.createElement("li",null,React.createElement("p",null,"- 50,000 UniFi total reward")),React.createElement("li",null,React.createElement("p",null,"- 100,000 BUIDL max staked simultaneously")))),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"UniFi-ETH Tier"),React.createElement("ul",null,React.createElement("p",null,"If reward is chosen in ",React.createElement("b",null,"UniFi")),React.createElement("li",null,React.createElement("p",null,"- 50% reward")),React.createElement("li",null,React.createElement("p",null,"- 50,000 UniFi total reward")),React.createElement("li",null,React.createElement("p",null,"- 100,000 UniFi max staked simultaneously"))),React.createElement("ul",null,React.createElement("p",null,"If reward is chosen in ",React.createElement("b",null,"BUIDL")),React.createElement("li",null,React.createElement("p",null,"- 30% reward")),React.createElement("li",null,React.createElement("p",null,"- 30,000 BUIDL total reward")),React.createElement("li",null,React.createElement("p",null,"- 100,000 UniFi max staked simultaneously")))),React.createElement("section",{className:"ExpPar ExpParV"},React.createElement("p",null,"uSD-USDC / uSD-DAI Tiers"),React.createElement("ul",null,React.createElement("p",null,"If reward is chosen in ",React.createElement("b",null,"BUIDL")),React.createElement("li",null,React.createElement("p",null,"- 15% reward")),React.createElement("li",null,React.createElement("p",null,"- 15,000 BUIDL total reward")),React.createElement("li",null,React.createElement("p",null,"- 100,000 uSD max staked simultaneously"))),React.createElement("ul",null,React.createElement("p",null,"If reward is chosen in ",React.createElement("b",null,"UniFi")),React.createElement("li",null,React.createElement("p",null,"- 25% reward")),React.createElement("li",null,React.createElement("p",null,"- 37,500 UniFi total reward")),React.createElement("li",null,React.createElement("p",null,"- 150,000 uSD max staked simultaneously")))),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Like the v1 mining contracts, all v1.5 contracts are redeemable on a weekly basis. After the special three month reward period, rewards will be reduced to v1 levels.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"We’ll also upgrade the DFOhub frontend with a new Farming section so that you can see every liquidity mining position available among all DFOs.  We’ve also turned ",React.createElement("a",{target:"_blank",href:"https://discordapp.com/channels/652132797032562689/701678117886099466/762690195753533500"},"a joke of Ale’s into a real fork of Uniswap’s frontend"),". It will track DFO token trades more efficiently, and will also be available on the DFOhub GUI.")),React.createElement("h2",null,"About The Proposal Vote"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"You can vote to agree or disagree with it by staking your BUIDL, UniFi and ARTE up until the end block ",React.createElement("a",{target:"_blank",href:"https://etherscan.io/block/countdown/11016666"},"n. 11016666"),". If you have any questions, you can ask them ",React.createElement("a",{target:"_blank",href:"https://discord.gg/FPcZpxB"},"here")," and we will answer them ASAP.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"Each token = one vote (1 BUIDL = 1 vote; 1 ARTE = 1 vote; 1 UniFi = 1 vote). When the end block ends, if the majority of staked tokens vote YES, the DFOhub team will immediately begin implementing the strategy to free us from Uniswap’s black hole once and for all.")),React.createElement("h2",null,"An Important Message From Ale"),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"If you aren’t happy with this outcome, please remember it is not DFOhub’s fault (although it is only thanks to the quality of our smart contracts that we can do something about it).")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"The problem is with Uniswap's protocol. As soon as we understood this, we approached them, hoping they might work with us to find a solution. Instead, we were rudely dismissed. They would not even entertain the prospect that their protocol is flawed (even though it is, thanks to some centralized decisions viewable on their github repo), let alone try to help.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"But using DFOhub's own funds, we have figured out our own solution and can resolve the problem (and reward stakers in the process) without relying on a third party, and without needing to compromise our long term strategy or the fair inflation of BUIDL, ARTE and UniFi.")),React.createElement("section",{className:"ExpPar"},React.createElement("p",null,"We delayed important projects like EthItem to deal with this, and are as annoyed as you are. But we have worked very hard, and have found a way."))))}});var StakingElementController=function(t){var n=this;n.view=t,n.loadData=function(t){window.loadStakingElement(t)},n.performRedeem=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.blockchainCall(window.liquidityMiningRedeemContract.methods.redeemed,e.props.element.address);case 2:if(!n.sent){n.next=4;break}throw"This position has been already redeemed";case 4:return n.next=6,window.blockchainCall(window.liquidityMiningRedeemContract.methods.initializer);case 6:n.t0=n.sent,n.t1=window.voidEthereumAddress;if(n.t0===n.t1){n.next=10;break}throw"Redeem has not been initialized yet";case 10:return n.next=12,window.blockchainCall(window.liquidityMiningRedeemContract.methods.redeem);case 12:case"end":return n.stop()}},n,this)}));return t}()};var StakingElement=React.createClass({displayName:"StakingElement",requiredScripts:["spa/bigLoader.jsx","spa/ghostLoader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"ethereum/ping":function(){return t.controller.loadData(t)}}},componentDidMount:function(){this.controller.loadData(this)},perform:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=t.currentTarget;if(this.state&&this.state.performing||n.className.indexOf("Disabled")!==-1)return;var r=n.dataset.action,i=[this];for(var s=1;s<arguments.length;s++)i.push(arguments[s]);var o=this,u=function(t){var n=t&&(t.message||t);o.setState({performing:null},function(){n&&n.indexOf("denied")===-1&&setTimeout(function(){alert(n)}),!n&&o.controller.loadData(o)})};o.setState({performing:r},function(){o.controller["perform"+r.firstLetterToUpperCase()].apply(this,i).catch(u).finally(u)})},render:function(){var t=this;return React.createElement("section",null,React.createElement("a",{href:"javascript:;",className:"returnbackbrah",onClick:this.props.onClose},"⬅️ All"),React.createElement("h3",null),React.createElement("a",{className:"FFFFFFFFF",target:"_blank",href:"https://etherscan.io/address/"+this.props.element.address},this.props.element.address),(!this.state||!this.state.data)&&React.createElement(BigLoader,null),this.state&&this.state.data&&React.createElement("section",null,React.createElement("ul",{className:"DFOCONTRACT"},Object.keys(this.state.data).filter(function(e){return e.indexOf("0x")===0}).map(function(e){return React.createElement("li",{key:e},React.createElement("h2",null,"⛏ By ",t.state.data[e].contractData.name," Liquidity Mining ⛏"),React.createElement("ul",{className:"YOURVOTE"},Object.keys(t.state.data[e]).filter(function(e){return!isNaN(parseInt(e))}).map(function(n){return React.createElement("li",{key:n},React.createElement("h1",null,"Pair ",t.state.data[e][n].token0.symbol," - ",t.state.data[e][n].token1.symbol),React.createElement("div",null,React.createElement("h4",null,"Total ",React.createElement("b",null,t.state.data[e][n].token0.symbol)," from all of the locked positions:")," ",React.createElement("p",null,window.fromDecimals(t.state.data[e][n].totalToken0Amount,t.state.data[e][n].token0.decimals))),React.createElement("div",null,React.createElement("h4",null,"Total ",React.createElement("b",null,t.state.data[e][n].token1.symbol)," from all of the locked positions:")," ",React.createElement("p",null,window.fromDecimals(t.state.data[e][n].totalToken1Amount,t.state.data[e][n].token1.decimals))),React.createElement("div",null,React.createElement("h3",null,"Assets owned by this wallet: ")),React.createElement("div",null,React.createElement("h4",{className:"YYYYY"},"This wallet owns ",React.createElement("b",null,t.state.data[e][n].elements.length)," Liquidity Mining Position",t.state.data[e][n].elements.length>1?"s":"",", which correspond to the ",React.createElement("b",null,t.state.data[e][n].poolPercentageString," ")," of the entire Liquidity Mining Contract")),React.createElement("div",null,React.createElement("h4",{className:"YYYYY"},React.createElement("p",null,window.fromDecimals(t.state.data[e][n].token0Amount,t.state.data[e][n].token0.decimals)," ",t.state.data[e][n].token0.symbol))),React.createElement("div",null,React.createElement("h4",{className:"YYYYY"},React.createElement("p",null,window.fromDecimals(t.state.data[e][n].token1Amount,t.state.data[e][n].token1.decimals)," ",t.state.data[e][n].token1.symbol))),React.createElement("div",null,React.createElement("h3",null,"+ Accumuled Mining Reward:")),React.createElement("div",null,React.createElement("h4",{className:"YYYYY"},React.createElement("p",null,window.fromDecimals(t.state.data[e][n].partialReward,t.state.data[e].contractData.token.decimals)," ",t.state.data[e].contractData.token.symbol))))})))})),React.createElement("section",{className:"DFOCONTRACT"},React.createElement("h2",null,"✨ Bonus ✨"),React.createElement("ul",{className:"YOURVOTE YOURVOTEX"},window.getNetworkElement("gifts").map(function(e){return React.createElement("li",{key:e.address},React.createElement("section",null,React.createElement("div",null,React.createElement("h4",null,React.createElement("b",null,"+")," a fixed bonus of ",React.createElement("p",null,window.fromDecimals(e.amount,t.props.tokens[e.address].decimals)," ",t.props.tokens[e.address].symbol)))))}))),React.createElement("br",null),React.createElement("br",null),this.state.data.tokens&&React.createElement("section",{className:"DFOCONTRACT DFOCONTRACTRRRR"},React.createElement("h2",null,"🌈 Total withdrawable by this wallet: 🌈"),React.createElement("ul",{className:"YOURVOTE"},this.state.data.tokens.filter(function(e){return e.amount!=="0"}).map(function(e){return React.createElement("li",{key:e.token.address},React.createElement("section",null,React.createElement("h4",{className:"YYYYY"},React.createElement("p",null,window.fromDecimals(e.amount,e.token.decimals)," ",e.token.symbol))))}),React.createElement("section",null,this.state.performing!=="redeem"&&React.createElement("a",{className:"GIVEMEMYMONEYBRO",href:"javascript:;","data-action":"redeem",onClick:this.perform},"Redeem"),this.state.performing==="redeem"&&React.createElement(GhostLoader,null))))))}});var UnimergencyController=function(t){var n=this;n.view=t,n.stakedEvent=window.web3.utils.sha3("Staked(address,uint256,uint256,uint256,uint256,uint256,uint256,uint256,uint256[],uint256)"),n.loadData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;return regeneratorRuntime.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:window.stakeInfos={},e={},window.involvedTokens=e,t={},i=[],s=window.getNetworkElement("stakingContractData"),o=s,u=Array.isArray(o),a=0,o=u?o:o[Symbol.iterator]();case 7:if(!u){k.next=13;break}if(!(a>=o.length)){k.next=10;break}return k.abrupt("break",46);case 10:f=o[a++],k.next=17;break;case 13:a=o.next();if(!a.done){k.next=16;break}return k.abrupt("break",46);case 16:f=a.value;case 17:return l=f,i.push(n.loadStakingContractData(l,e).then(function(t){return n.view.setState({tokens:e}),t})),k.next=21,window.web3.eth.getPastLogs({address:l.address,topics:[n.stakedEvent],fromBlock:"0",toBlock:"latest"});case 21:c=k.sent,h=c,p=Array.isArray(h),d=0,h=p?h:h[Symbol.iterator]();case 23:if(!p){k.next=29;break}if(!(d>=h.length)){k.next=26;break}return k.abrupt("break",44);case 26:v=h[d++],k.next=33;break;case 29:d=h.next();if(!d.done){k.next=32;break}return k.abrupt("break",44);case 32:v=d.value;case 33:m=v,g=window.web3.eth.abi.decodeParameters(["uint256","uint256","uint256","uint256","uint256","uint256[]","uint256"],m.data),g=g[2],y=window.web3.utils.toChecksumAddress(window.web3.eth.abi.decodeParameter("address",m.topics[1])),b=window.web3.eth.abi.decodeParameter("uint256",m.topics[2]),y=window.web3.utils.toChecksumAddress(y),t[y]=t[y]||{address:y,contractDataPromises:i},t[y][l.address]=t[y][l.address]||{contractDataPromise:i[i.length-1],positions:{}},t[y][l.address].positions[b]=t[y][l.address].positions[b]||n.elaboratePositions(y,i[i.length-1],b);case 42:k.next=23;break;case 44:k.next=7;break;case 46:window.uniqueAddresses=t,w=t[window.walletAddress]?window.walletAddress:null,n.view.setState({uniqueAddresses:t,key:w}),E=Object.keys(t),S=E,x=Array.isArray(S),T=0,S=x?S:S[Symbol.iterator]();case 51:if(!x){k.next=57;break}if(!(T>=S.length)){k.next=54;break}return k.abrupt("break",72);case 54:N=S[T++],k.next=61;break;case 57:T=S.next();if(!T.done){k.next=60;break}return k.abrupt("break",72);case 60:N=T.value;case 61:return C=N,k.prev=62,k.next=65,window.blockchainCall(window.liquidityMiningRedeemContract.methods.redeemed,C);case 65:t[C].redeemed=k.sent,k.next=70;break;case 68:k.prev=68,k.t0=k["catch"](62);case 70:k.next=51;break;case 72:n.view.setState({uniqueAddresses:t});case 73:case"end":return k.stop()}},r,this,[[62,68]])}));return t}(),n.loadStakingContractData=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,t){var r,i,s,o,u,a,f,l,c;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:r=JSON.parse(JSON.stringify(e)),r.contract=window.newContract(window.context.StakeABI,r.address),i=r.token;if(i){h.next=19;break}return h.t0=window,h.t1=window.context.DoubleProxyABI,h.next=8,window.blockchainCall(r.contract.methods.doubleProxy);case 8:return h.t2=h.sent,s=h.t0.newContract.call(h.t0,h.t1,h.t2),h.t3=window,h.t4=window.context.ProxyABI,h.next=14,window.blockchainCall(s.methods.proxy);case 14:return h.t5=h.sent,o=h.t3.newContract.call(h.t3,h.t4,h.t5),h.next=18,window.blockchainCall(o.methods.getToken);case 18:i=h.sent;case 19:i=window.web3.utils.toChecksumAddress(i),h.t6=t[i];if(h.t6){h.next=25;break}return h.next=24,window.loadTokenInfos(i);case 24:h.t6=h.sent;case 25:return r.token=t[i]=h.t6,h.next=28,window.blockchainCall(r.contract.methods.tokens);case 28:u=h.sent,a=0;case 30:if(!(a<u.length)){h.next=55;break}f=u[a],f=window.web3.utils.toChecksumAddress(f),h.t7=t[f];if(h.t7){h.next=38;break}return h.next=37,window.loadTokenInfos(f);case 37:h.t7=h.sent;case 38:return r.pools[a].token=t[f]=h.t7,h.t8=window,h.t9=window.context.UniswapV2PairABI,h.next=43,window.blockchainCall(window.uniswapV2Factory.methods.getPair,r.token.address,r.pools[a].token.address);case 43:return h.t10=h.sent,l=h.t8.newContract.call(h.t8,h.t9,h.t10),h.t11=window.web3.utils,h.next=48,window.blockchainCall(l.methods.token0);case 48:h.t12=h.sent,c=h.t11.toChecksumAddress.call(h.t11,h.t12),r.pools[a].token0=c===r.token.address?r.token:r.pools[a].token,r.pools[a].token1=c===r.token.address?r.pools[a].token:r.token;case 52:a++,h.next=30;break;case 55:return h.abrupt("return",r);case 56:case"end":return h.stop()}},n,this)}));return t}(),n.elaboratePositions=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e,t,r){var i,s,o,u,a,f,l,c,h,p,d;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return i=[],v.next=3,t;case 3:return s=v.sent,v.t0=parseInt,v.next=7,window.blockchainCall(s.contract.methods.length,r);case 7:v.t1=v.sent,o=(0,v.t0)(v.t1),u=0;case 10:if(!(u<o)){v.next=47;break}v.t2=window.stakeInfos[s.address+"_"+r+"_"+u];if(v.t2){v.next=16;break}return v.next=15,window.blockchainCall(s.contract.methods.stakeInfo,r,u);case 15:v.t2=v.sent;case 16:a=window.stakeInfos[s.address+"_"+r+"_"+u]=v.t2;if(window.web3.utils.toChecksumAddress(a[0])!==e){v.next=44;break}a.i=u,a.tier=r,a.poolPosition=a[1],a.poolAmount=a[4],a.contractData=s,f=a[7],a.partialReward="0",l=f,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();case 26:if(!c){v.next=32;break}if(!(h>=l.length)){v.next=29;break}return v.abrupt("break",43);case 29:p=l[h++],v.next=36;break;case 32:h=l.next();if(!h.done){v.next=35;break}return v.abrupt("break",43);case 35:p=h.value;case 36:d=p,d=parseInt(d);if(!(d===0||d>window.context.snapshotBlock)){v.next=40;break}return v.abrupt("continue",41);case 40:a.partialReward=window.web3.utils.toBN(a.partialReward).add(window.web3.utils.toBN(a[8])).toString();case 41:v.next=26;break;case 43:i.push(a);case 44:u++,v.next=10;break;case 47:return v.abrupt("return",i);case 48:case"end":return v.stop()}},n,this)}));return t}()};var Unimergency=React.createClass({displayName:"Unimergency",requiredScripts:["spa/bigLoader.jsx"],requiredModules:["spa/stakingElement"],componentDidMount:function(){this.controller.loadData()},onClick:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.setState({key:t.currentTarget.dataset.key})},getDefaultSubscriptions:function(){var t=this;return{"key/set":function(n){return t.setState({key:n})},"ethereum/ping":function(){return t.controller.loadData()}}},render:function(){var t=this,n=this;return React.createElement("section",{className:"walletlist"},this.state&&this.state.uniqueAddresses&&!this.state.key&&React.createElement("section",null,React.createElement("h1",null,"Addresses: ",Object.keys(this.state.uniqueAddresses).length),React.createElement("ul",null,Object.keys(this.state.uniqueAddresses).map(function(e){return React.createElement("li",{key:e},React.createElement("span",null,React.createElement("a",{href:"javascript:;",onClick:t.onClick,"data-key":e},e),n.state.uniqueAddresses[e].redeemed?React.createElement("span",null,"✅"):React.createElement("span",null,"💰")))})),React.createElement("br",null),React.createElement("br",null)),this.state&&this.state.key&&React.createElement(StakingElement,{tokens:this.state.tokens,element:this.state.uniqueAddresses[this.state.key],onClose:function(){return n.setState({key:null})}}),(!this.state||!this.state.uniqueAddresses)&&React.createElement(BigLoader,null))}});!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/bigLoader.jsx','spa/ghostLoader.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/loader.jsx','spa/proposal/controller.jsx','spa/proposal/style.min.css','spa/proposal/view.jsx','spa/stakingElement/controller.jsx','spa/stakingElement/style.min.css','spa/stakingElement/view.jsx','spa/unimergency/controller.jsx','spa/unimergency/style.min.css','spa/unimergency/view.jsx']);